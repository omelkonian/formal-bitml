<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>BitML.Semantics.Action</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitml/tree/sets/BitML/Semantics/Action.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Types of actions.</a>
<a id="95" class="Comment">------------------------------------------------------------------------</a>
<a id="168" class="Keyword">open</a> <a id="173" class="Keyword">import</a> <a id="180" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Prelude.Sets.html" class="Module">Prelude.Sets</a>
<a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="Prelude.ToList.html" class="Module">Prelude.ToList</a>

<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>

<a id="328" class="Keyword">module</a> <a id="335" href="BitML.Semantics.Action.html" class="Module">BitML.Semantics.Action</a>
  <a id="360" class="Symbol">(</a><a id="361" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="373" class="Symbol">:</a> <a id="375" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="378" class="Symbol">)</a>
  <a id="382" class="Symbol">⦃</a> <a id="384" href="BitML.Semantics.Action.html#384" class="Bound">_</a> <a id="386" class="Symbol">:</a> <a id="388" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="394" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="406" class="Symbol">⦄</a>
  <a id="410" class="Symbol">(</a><a id="411" href="BitML.Semantics.Action.html#411" class="Bound">Honest</a> <a id="418" class="Symbol">:</a> <a id="420" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="426" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a><a id="437" class="Symbol">)</a>
  <a id="441" class="Keyword">where</a>

<a id="448" class="Keyword">open</a> <a id="453" class="Keyword">import</a> <a id="460" href="BitML.Contracts.Types.html" class="Module">BitML.Contracts.Types</a> <a id="482" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="494" href="BitML.Semantics.Action.html#411" class="Bound">Honest</a> <a id="501" class="Keyword">hiding</a> <a id="508" class="Symbol">(</a><a id="509" href="BitML.Contracts.Types.html#509" class="Generalizable">A</a><a id="510" class="Symbol">;</a> <a id="512" href="BitML.Contracts.Types.html#511" class="Generalizable">B</a><a id="513" class="Symbol">)</a>
<a id="515" class="Keyword">open</a> <a id="520" class="Keyword">import</a> <a id="527" href="BitML.Contracts.Helpers.html" class="Module">BitML.Contracts.Helpers</a> <a id="551" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="563" href="BitML.Semantics.Action.html#411" class="Bound">Honest</a>

<a id="571" class="Comment">--------------------------------------------------------------------------------</a>

<a id="653" class="Keyword">data</a> <a id="Action"></a><a id="658" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a> <a id="665" class="Symbol">:</a> <a id="667" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="671" class="Keyword">where</a>

  <a id="680" class="Comment">-- commit secrets to stipulate {G}C</a>
  <a id="Action.♯▷_"></a><a id="718" href="BitML.Semantics.Action.html#718" class="InductiveConstructor Operator">♯▷_</a> <a id="722" class="Symbol">:</a> <a id="724" href="BitML.Contracts.Types.html#2412" class="Record">Advertisement</a> <a id="738" class="Symbol">→</a> <a id="740" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

  <a id="750" class="Comment">-- spend x to stipulate {G}C</a>
  <a id="Action._▷ˢ_"></a><a id="781" href="BitML.Semantics.Action.html#781" class="InductiveConstructor Operator">_▷ˢ_</a> <a id="786" class="Symbol">:</a> <a id="788" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="791" class="Symbol">→</a> <a id="793" href="BitML.Contracts.Types.html#2412" class="Record">Advertisement</a> <a id="807" class="Symbol">→</a> <a id="809" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

  <a id="819" class="Comment">-- take branch</a>
  <a id="Action._▷_"></a><a id="836" href="BitML.Semantics.Action.html#836" class="InductiveConstructor Operator">_▷_</a> <a id="840" class="Symbol">:</a> <a id="842" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="845" class="Symbol">→</a> <a id="847" href="BitML.Contracts.Types.html#626" class="Datatype">Contract</a> <a id="856" class="Symbol">→</a> <a id="858" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

  <a id="868" class="Comment">-- join deposits</a>
  <a id="Action._↔_▷⟨_,_⟩"></a><a id="887" href="BitML.Semantics.Action.html#887" class="InductiveConstructor Operator">_↔_▷⟨_,_⟩</a> <a id="897" class="Symbol">:</a> <a id="899" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="902" class="Symbol">→</a> <a id="904" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="907" class="Symbol">→</a> <a id="909" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="921" class="Symbol">→</a> <a id="923" href="BitML.BasicTypes.html#280" class="Function">Value</a> <a id="929" class="Symbol">→</a> <a id="931" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

  <a id="941" class="Comment">-- divide a deposit</a>
  <a id="Action._▷⟨_,_,_⟩"></a><a id="963" href="BitML.Semantics.Action.html#963" class="InductiveConstructor Operator">_▷⟨_,_,_⟩</a> <a id="973" class="Symbol">:</a> <a id="975" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="978" class="Symbol">→</a> <a id="980" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="992" class="Symbol">→</a> <a id="994" href="BitML.BasicTypes.html#280" class="Function">Value</a> <a id="1000" class="Symbol">→</a> <a id="1002" href="BitML.BasicTypes.html#280" class="Function">Value</a> <a id="1008" class="Symbol">→</a> <a id="1010" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

  <a id="1020" class="Comment">-- donate deposit to participant</a>
  <a id="Action._▷ᵈ_"></a><a id="1055" href="BitML.Semantics.Action.html#1055" class="InductiveConstructor Operator">_▷ᵈ_</a> <a id="1060" class="Symbol">:</a> <a id="1062" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="1065" class="Symbol">→</a> <a id="1067" href="BitML.Semantics.Action.html#361" class="Bound">Participant</a> <a id="1079" class="Symbol">→</a> <a id="1081" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

  <a id="1091" class="Comment">-- destroy i-th deposit in xs through y</a>
  <a id="Action._,_▷ᵈˢ_"></a><a id="1133" href="BitML.Semantics.Action.html#1133" class="InductiveConstructor Operator">_,_▷ᵈˢ_</a> <a id="1141" class="Symbol">:</a> <a id="1143" class="Symbol">(</a><a id="1144" href="BitML.Semantics.Action.html#1144" class="Bound">xs</a> <a id="1147" class="Symbol">:</a> <a id="1149" href="BitML.BasicTypes.html#369" class="Function">Ids</a><a id="1152" class="Symbol">)</a> <a id="1154" class="Symbol">→</a> <a id="1156" href="Prelude.Lists.Indexed.html#469" class="Function">Index</a> <a id="1162" class="Symbol">(</a><a id="1163" href="Prelude.ToList.html#170" class="Field">toList</a> <a id="1170" href="BitML.Semantics.Action.html#1144" class="Bound">xs</a><a id="1172" class="Symbol">)</a> <a id="1174" class="Symbol">→</a> <a id="1176" href="BitML.BasicTypes.html#356" class="Function">Id</a> <a id="1179" class="Symbol">→</a> <a id="1181" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

<a id="1189" class="Keyword">unquoteDecl</a> <a id="DecEq-Action"></a><a id="1201" href="BitML.Semantics.Action.html#1201" class="Function">DecEq-Action</a> <a id="1214" class="Symbol">=</a> <a id="1216" href="Prelude.Generics.html#9852" class="Function">DERIVE</a> <a id="1223" href="Prelude.DecEq.Core.html#114" class="Record">DecEq</a> <a id="1229" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1231" class="Keyword">quote</a> <a id="1237" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a> <a id="1244" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1246" href="BitML.Semantics.Action.html#1201" class="Function">DecEq-Action</a> <a id="1259" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="Actions"></a><a id="1262" href="BitML.Semantics.Action.html#1262" class="Function">Actions</a> <a id="1270" class="Symbol">=</a> <a id="1272" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1277" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>

<a id="1285" class="Keyword">variable</a>
  <a id="1296" href="BitML.Semantics.Action.html#1296" class="Generalizable">act</a> <a id="1300" href="BitML.Semantics.Action.html#1300" class="Generalizable">act′</a> <a id="1305" class="Symbol">:</a> <a id="1307" href="BitML.Semantics.Action.html#658" class="Datatype">Action</a>
  <a id="1316" href="BitML.Semantics.Action.html#1316" class="Generalizable">acts</a> <a id="1321" href="BitML.Semantics.Action.html#1321" class="Generalizable">acts′</a> <a id="1327" class="Symbol">:</a> <a id="1329" href="BitML.Semantics.Action.html#1262" class="Function">Actions</a>
</pre></body></html>