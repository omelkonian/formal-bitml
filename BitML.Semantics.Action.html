<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>BitML.Semantics.Action</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-bitml/tree/master/BitML/Semantics/Action.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Types of actions.</a>
<a id="95" class="Comment">------------------------------------------------------------------------</a>
<a id="168" class="Keyword">open</a> <a id="173" class="Keyword">import</a> <a id="180" href="Prelude.Init.html" class="Module">Prelude.Init</a><a id="192" class="Symbol">;</a> <a id="194" class="Keyword">open</a> <a id="199" href="Prelude.Init.html#504" class="Module">SetAsType</a>
<a id="209" class="Keyword">open</a> <a id="214" class="Keyword">import</a> <a id="221" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="235" class="Keyword">open</a> <a id="240" class="Keyword">import</a> <a id="247" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="262" class="Keyword">open</a> <a id="267" class="Keyword">import</a> <a id="274" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>

<a id="292" class="Keyword">module</a> <a id="299" href="BitML.Semantics.Action.html" class="Module">BitML.Semantics.Action</a>
  <a id="324" class="Symbol">(</a><a id="325" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="337" class="Symbol">:</a> <a id="339" href="Agda.Primitive.html#320" class="Primitive">Type</a><a id="343" class="Symbol">)</a>
  <a id="347" class="Symbol">⦃</a> <a id="349" href="BitML.Semantics.Action.html#349" class="Bound">_</a> <a id="351" class="Symbol">:</a> <a id="353" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="359" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="371" class="Symbol">⦄</a>
  <a id="375" class="Symbol">(</a><a id="376" href="BitML.Semantics.Action.html#376" class="Bound">Honest</a> <a id="383" class="Symbol">:</a> <a id="385" href="Data.List.NonEmpty.Base.html#1088" class="Record">List⁺</a> <a id="391" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a><a id="402" class="Symbol">)</a>
  <a id="406" class="Keyword">where</a>

<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="BitML.Contracts.Types.html" class="Module">BitML.Contracts.Types</a> <a id="447" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="459" href="BitML.Semantics.Action.html#376" class="Bound">Honest</a> <a id="466" class="Keyword">hiding</a> <a id="473" class="Symbol">(</a><a id="474" href="BitML.Contracts.Types.html#532" class="Generalizable">A</a><a id="475" class="Symbol">;</a> <a id="477" href="BitML.Contracts.Types.html#534" class="Generalizable">B</a><a id="478" class="Symbol">)</a>
<a id="480" class="Keyword">open</a> <a id="485" class="Keyword">import</a> <a id="492" href="BitML.Contracts.Helpers.html" class="Module">BitML.Contracts.Helpers</a> <a id="516" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="528" href="BitML.Semantics.Action.html#376" class="Bound">Honest</a>

<a id="536" class="Comment">--------------------------------------------------------------------------------</a>

<a id="618" class="Keyword">data</a> <a id="Action"></a><a id="623" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a> <a id="630" class="Symbol">:</a> <a id="632" href="Agda.Primitive.html#320" class="Primitive">Type</a> <a id="637" class="Keyword">where</a>

  <a id="646" class="Comment">-- commit secrets to stipulate {G}C</a>
  <a id="Action.♯▷_"></a><a id="684" href="BitML.Semantics.Action.html#684" class="InductiveConstructor Operator">♯▷_</a> <a id="688" class="Symbol">:</a> <a id="690" href="BitML.Contracts.Types.html#2489" class="Record">Advertisement</a> <a id="704" class="Symbol">→</a> <a id="706" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

  <a id="716" class="Comment">-- spend x to stipulate {G}C</a>
  <a id="Action._▷ˢ_"></a><a id="747" href="BitML.Semantics.Action.html#747" class="InductiveConstructor Operator">_▷ˢ_</a> <a id="752" class="Symbol">:</a> <a id="754" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="757" class="Symbol">→</a> <a id="759" href="BitML.Contracts.Types.html#2489" class="Record">Advertisement</a> <a id="773" class="Symbol">→</a> <a id="775" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

  <a id="785" class="Comment">-- take branch</a>
  <a id="Action._▷_"></a><a id="802" href="BitML.Semantics.Action.html#802" class="InductiveConstructor Operator">_▷_</a> <a id="806" class="Symbol">:</a> <a id="808" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="811" class="Symbol">→</a> <a id="813" href="BitML.Contracts.Types.html#649" class="Datatype">Branch</a> <a id="820" class="Symbol">→</a> <a id="822" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

  <a id="832" class="Comment">-- join deposits</a>
  <a id="Action._↔_▷⟨_,_⟩"></a><a id="851" href="BitML.Semantics.Action.html#851" class="InductiveConstructor Operator">_↔_▷⟨_,_⟩</a> <a id="861" class="Symbol">:</a> <a id="863" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="866" class="Symbol">→</a> <a id="868" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="871" class="Symbol">→</a> <a id="873" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="885" class="Symbol">→</a> <a id="887" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="893" class="Symbol">→</a> <a id="895" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

  <a id="905" class="Comment">-- divide a deposit</a>
  <a id="Action._▷⟨_,_,_⟩"></a><a id="927" href="BitML.Semantics.Action.html#927" class="InductiveConstructor Operator">_▷⟨_,_,_⟩</a> <a id="937" class="Symbol">:</a> <a id="939" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="942" class="Symbol">→</a> <a id="944" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="956" class="Symbol">→</a> <a id="958" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="964" class="Symbol">→</a> <a id="966" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="972" class="Symbol">→</a> <a id="974" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

  <a id="984" class="Comment">-- donate deposit to participant</a>
  <a id="Action._▷ᵈ_"></a><a id="1019" href="BitML.Semantics.Action.html#1019" class="InductiveConstructor Operator">_▷ᵈ_</a> <a id="1024" class="Symbol">:</a> <a id="1026" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="1029" class="Symbol">→</a> <a id="1031" href="BitML.Semantics.Action.html#325" class="Bound">Participant</a> <a id="1043" class="Symbol">→</a> <a id="1045" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

  <a id="1055" class="Comment">-- destroy i-th deposit in xs through y</a>
  <a id="Action._,_▷ᵈˢ_"></a><a id="1097" href="BitML.Semantics.Action.html#1097" class="InductiveConstructor Operator">_,_▷ᵈˢ_</a> <a id="1105" class="Symbol">:</a> <a id="1107" class="Symbol">(</a><a id="1108" href="BitML.Semantics.Action.html#1108" class="Bound">xs</a> <a id="1111" class="Symbol">:</a> <a id="1113" href="BitML.BasicTypes.html#314" class="Function">Ids</a><a id="1116" class="Symbol">)</a> <a id="1118" class="Symbol">→</a> <a id="1120" href="Prelude.Lists.Indexed.html#492" class="Function">Index</a> <a id="1126" href="BitML.Semantics.Action.html#1108" class="Bound">xs</a> <a id="1129" class="Symbol">→</a> <a id="1131" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="1134" class="Symbol">→</a> <a id="1136" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

<a id="1144" class="Keyword">unquoteDecl</a> <a id="DecEq-Action"></a><a id="1156" href="BitML.Semantics.Action.html#1156" class="Function">DecEq-Action</a> <a id="1169" class="Symbol">=</a> <a id="1171" href="Prelude.Generics.Deriving.html#1365" class="Macro">DERIVE</a> <a id="1178" href="Prelude.DecEq.Core.html#148" class="Record">DecEq</a> <a id="1184" href="Data.List.Base.html#5034" class="Function Operator">[</a> <a id="1186" class="Keyword">quote</a> <a id="1192" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a> <a id="1199" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1201" href="BitML.Semantics.Action.html#1156" class="Function">DecEq-Action</a> <a id="1214" href="Data.List.Base.html#5034" class="Function Operator">]</a>

<a id="Actions"></a><a id="1217" href="BitML.Semantics.Action.html#1217" class="Function">Actions</a> <a id="1225" class="Symbol">=</a> <a id="1227" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="1232" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>

<a id="1240" class="Keyword">variable</a>
  <a id="1251" href="BitML.Semantics.Action.html#1251" class="Generalizable">act</a> <a id="1255" href="BitML.Semantics.Action.html#1255" class="Generalizable">act′</a> <a id="1260" class="Symbol">:</a> <a id="1262" href="BitML.Semantics.Action.html#623" class="Datatype">Action</a>
  <a id="1271" href="BitML.Semantics.Action.html#1271" class="Generalizable">acts</a> <a id="1276" href="BitML.Semantics.Action.html#1276" class="Generalizable">acts′</a> <a id="1282" class="Symbol">:</a> <a id="1284" href="BitML.Semantics.Action.html#1217" class="Function">Actions</a>
</pre></body></html>