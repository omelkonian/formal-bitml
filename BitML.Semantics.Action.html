<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>BitML.Semantics.Action</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Types of actions.</a>
<a id="95" class="Comment">------------------------------------------------------------------------</a>
<a id="168" class="Keyword">open</a> <a id="173" class="Keyword">import</a> <a id="180" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>

<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="BitML.BasicTypes.html" class="Module">BitML.BasicTypes</a>

<a id="276" class="Keyword">module</a> <a id="283" href="BitML.Semantics.Action.html" class="Module">BitML.Semantics.Action</a>
  <a id="308" class="Symbol">(</a><a id="309" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="321" class="Symbol">:</a> <a id="323" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="326" class="Symbol">)</a>
  <a id="330" class="Symbol">⦃</a> <a id="332" href="BitML.Semantics.Action.html#332" class="Bound">_</a> <a id="334" class="Symbol">:</a> <a id="336" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="342" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="354" class="Symbol">⦄</a>
  <a id="358" class="Symbol">(</a><a id="359" href="BitML.Semantics.Action.html#359" class="Bound">Honest</a> <a id="366" class="Symbol">:</a> <a id="368" href="Data.List.NonEmpty.Base.html#1079" class="Record">List⁺</a> <a id="374" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a><a id="385" class="Symbol">)</a>
  <a id="389" class="Keyword">where</a>

<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="BitML.Contracts.Types.html" class="Module">BitML.Contracts.Types</a> <a id="430" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="442" href="BitML.Semantics.Action.html#359" class="Bound">Honest</a> <a id="449" class="Keyword">hiding</a> <a id="456" class="Symbol">(</a><a id="457" href="BitML.Contracts.Types.html#515" class="Generalizable">A</a><a id="458" class="Symbol">;</a> <a id="460" href="BitML.Contracts.Types.html#517" class="Generalizable">B</a><a id="461" class="Symbol">)</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="BitML.Contracts.Helpers.html" class="Module">BitML.Contracts.Helpers</a> <a id="499" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="511" href="BitML.Semantics.Action.html#359" class="Bound">Honest</a>

<a id="519" class="Comment">--------------------------------------------------------------------------------</a>

<a id="601" class="Keyword">data</a> <a id="Action"></a><a id="606" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a> <a id="613" class="Symbol">:</a> <a id="615" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="619" class="Keyword">where</a>

  <a id="628" class="Comment">-- commit secrets to stipulate {G}C</a>
  <a id="Action.♯▷_"></a><a id="666" href="BitML.Semantics.Action.html#666" class="InductiveConstructor Operator">♯▷_</a> <a id="670" class="Symbol">:</a> <a id="672" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a> <a id="686" class="Symbol">→</a> <a id="688" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

  <a id="698" class="Comment">-- spend x to stipulate {G}C</a>
  <a id="Action._▷ˢ_"></a><a id="729" href="BitML.Semantics.Action.html#729" class="InductiveConstructor Operator">_▷ˢ_</a> <a id="734" class="Symbol">:</a> <a id="736" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="739" class="Symbol">→</a> <a id="741" href="BitML.Contracts.Types.html#2400" class="Record">Advertisement</a> <a id="755" class="Symbol">→</a> <a id="757" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

  <a id="767" class="Comment">-- take branch</a>
  <a id="Action._▷_"></a><a id="784" href="BitML.Semantics.Action.html#784" class="InductiveConstructor Operator">_▷_</a> <a id="788" class="Symbol">:</a> <a id="790" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="793" class="Symbol">→</a> <a id="795" href="BitML.Contracts.Types.html#632" class="Datatype">Contract</a> <a id="804" class="Symbol">→</a> <a id="806" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

  <a id="816" class="Comment">-- join deposits</a>
  <a id="Action._↔_▷⟨_,_⟩"></a><a id="835" href="BitML.Semantics.Action.html#835" class="InductiveConstructor Operator">_↔_▷⟨_,_⟩</a> <a id="845" class="Symbol">:</a> <a id="847" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="850" class="Symbol">→</a> <a id="852" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="855" class="Symbol">→</a> <a id="857" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="869" class="Symbol">→</a> <a id="871" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="877" class="Symbol">→</a> <a id="879" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

  <a id="889" class="Comment">-- divide a deposit</a>
  <a id="Action._▷⟨_,_,_⟩"></a><a id="911" href="BitML.Semantics.Action.html#911" class="InductiveConstructor Operator">_▷⟨_,_,_⟩</a> <a id="921" class="Symbol">:</a> <a id="923" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="926" class="Symbol">→</a> <a id="928" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="940" class="Symbol">→</a> <a id="942" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="948" class="Symbol">→</a> <a id="950" href="BitML.BasicTypes.html#229" class="Function">Value</a> <a id="956" class="Symbol">→</a> <a id="958" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

  <a id="968" class="Comment">-- donate deposit to participant</a>
  <a id="Action._▷ᵈ_"></a><a id="1003" href="BitML.Semantics.Action.html#1003" class="InductiveConstructor Operator">_▷ᵈ_</a> <a id="1008" class="Symbol">:</a> <a id="1010" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="BitML.Semantics.Action.html#309" class="Bound">Participant</a> <a id="1027" class="Symbol">→</a> <a id="1029" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

  <a id="1039" class="Comment">-- destroy i-th deposit in xs through y</a>
  <a id="Action._,_▷ᵈˢ_"></a><a id="1081" href="BitML.Semantics.Action.html#1081" class="InductiveConstructor Operator">_,_▷ᵈˢ_</a> <a id="1089" class="Symbol">:</a> <a id="1091" class="Symbol">(</a><a id="1092" href="BitML.Semantics.Action.html#1092" class="Bound">xs</a> <a id="1095" class="Symbol">:</a> <a id="1097" href="BitML.BasicTypes.html#314" class="Function">Ids</a><a id="1100" class="Symbol">)</a> <a id="1102" class="Symbol">→</a> <a id="1104" href="Prelude.Lists.html#1166" class="Function">Index</a> <a id="1110" href="BitML.Semantics.Action.html#1092" class="Bound">xs</a> <a id="1113" class="Symbol">→</a> <a id="1115" href="BitML.BasicTypes.html#301" class="Function">Id</a> <a id="1118" class="Symbol">→</a> <a id="1120" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

<a id="1128" class="Keyword">unquoteDecl</a> <a id="DecEq-Action"></a><a id="1140" href="BitML.Semantics.Action.html#1140" class="Function">DecEq-Action</a> <a id="1153" class="Symbol">=</a> <a id="1155" href="Prelude.Generics.html#9474" class="Function">DERIVE</a> <a id="1162" href="Prelude.DecEq.Core.html#97" class="Record">DecEq</a> <a id="1168" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1170" class="Keyword">quote</a> <a id="1176" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a> <a id="1183" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1185" href="BitML.Semantics.Action.html#1140" class="Function">DecEq-Action</a> <a id="1198" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="Actions"></a><a id="1201" href="BitML.Semantics.Action.html#1201" class="Function">Actions</a> <a id="1209" class="Symbol">=</a> <a id="1211" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1216" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>

<a id="1224" class="Keyword">variable</a>
  <a id="1235" href="BitML.Semantics.Action.html#1235" class="Generalizable">act</a> <a id="1239" href="BitML.Semantics.Action.html#1239" class="Generalizable">act′</a> <a id="1244" class="Symbol">:</a> <a id="1246" href="BitML.Semantics.Action.html#606" class="Datatype">Action</a>
  <a id="1255" href="BitML.Semantics.Action.html#1255" class="Generalizable">acts</a> <a id="1260" href="BitML.Semantics.Action.html#1260" class="Generalizable">acts′</a> <a id="1266" class="Symbol">:</a> <a id="1268" href="BitML.Semantics.Action.html#1201" class="Function">Actions</a>
</pre></body></html>